<div class="invoice-list-container">
  <div class="header">
    <h2>Liste des factures</h2>
    <button (click)="refreshList()" [disabled]="isLoading">
      <span *ngIf="!isLoading">Actualiser</span>
      <span *ngIf="isLoading">Chargement...</span>
    </button>
  </div>
  
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>
  
  <div *ngIf="isLoading" class="loading">
    Chargement des factures...
  </div>
  
  <div *ngIf="!isLoading && invoices.length === 0" class="no-data">
    Aucune facture trouvée.
  </div>
  
  <table *ngIf="!isLoading && invoices.length > 0">
    <thead>
      <tr>
        <th>Nom du fichier</th>
        <th>Statut</th>
        <th>Date d'upload</th>
        <th>Fournisseur</th>
        <th>Numéro</th>
        <th>Date</th>
        <th>Montant</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let invoice of invoices">
        <td>{{ invoice.original_filename }}</td>
        <td>
          <span class="status-badge" [ngClass]="invoice.status">
            {{ invoice.status === 'pending' ? 'En attente' : 
               invoice.status === 'processing' ? 'En cours' : 
               invoice.status === 'completed' ? 'Terminé' : 'Erreur' }}
          </span>
        </td>
        <td>{{ invoice.uploaded_at | date:'dd/MM/yyyy HH:mm' }}</td>
        <td>{{ invoice.vendor_name || 'Non détecté' }}</td>
        <td>{{ invoice.invoice_number || 'Non détecté' }}</td>
        <td>{{ invoice.invoice_date | date:'dd/MM/yyyy' || 'Non détecté' }}</td>
        <td>{{ invoice.total_amount ? (invoice.total_amount | currency:invoice.currency || 'EUR') : 'Non détecté' }}</td>
        <td class="actions">
          <button class="view-btn" [routerLink]="['/invoices', invoice.id]">Voir</button>
          <button class="delete-btn" (click)="deleteInvoice(invoice.id)">Supprimer</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>