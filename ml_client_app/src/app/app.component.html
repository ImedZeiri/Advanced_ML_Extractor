<mat-toolbar color="primary">
  <span>{{ title }}</span>
  <span class="spacer"></span>
</mat-toolbar>

<mat-sidenav-container class="sidenav-container">
  <mat-sidenav #sidenav mode="side" position="end" [opened]="sidenavOpen" class="extraction-sidenav">
    <div class="sidenav-header">
      <h2>Résultats de l'extraction</h2>
      <button mat-icon-button (click)="sidenavOpen = false">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="sidenav-content" *ngIf="extractionData">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Facture téléchargée avec succès</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div *ngIf="extractionData.invoice.extracted_content">
            <h3>Texte extrait:</h3>
            <div class="extracted-text">
              {{ extractionData.invoice.extracted_content.text }}
            </div>
            
            <h3>Métadonnées:</h3>
            <ul>
              <li><strong>Méthode d'extraction:</strong> {{ extractionData.invoice.extracted_content.extraction_method }}</li>
              <li><strong>Type de document:</strong> {{ extractionData.invoice.extracted_content.document_type }}</li>
              <li *ngIf="extractionData.invoice.extracted_content.page_count">
                <strong>Nombre de pages:</strong> {{ extractionData.invoice.extracted_content.page_count }}
              </li>
            </ul>
          </div>
          
          <div *ngIf="extractionData.invoice.extracted_content?.error" class="error-message">
            <h3>Erreur d'extraction:</h3>
            <p>{{ extractionData.invoice.extracted_content.error }}</p>
          </div>
          
          <div class="json-data">
            <h3>Données JSON complètes:</h3>
            <pre>{{ extractionData | json }}</pre>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </mat-sidenav>

  <mat-sidenav-content>
    <div class="main-content">
      <app-file-uploader (extractionSuccess)="onExtractionSuccess($event)"></app-file-uploader>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>